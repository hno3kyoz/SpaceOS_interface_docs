# 超声波传感器接口

超声波信息提供超声波传感器的配置、设置和状态信息。

![image-20220318151747709](images/image-20220318151747709.png)

## 超声波配置

/sonar/info

```
 "APA:FL": {					//APA长距超声，前左
			"ACT": "1",				//超声单元可用性: 0-不可用，1-可用
			"ORIDEG": "80",			//超声安装角度（SAE坐标系, deg）（-179~180）
			"Xm": "3.44511",		//超声安装位置（SAE坐标系, m）
			"Ym": "0.91822",		//超声安装位置（SAE坐标系, m）
			"Dm": "0.0",			//超声量程or最大有效检测距离（m, upa约2~2.5, apa约5）,项目中如用不到也可填0
			"Rm": "0.0",			// 超声宽度范围参数R（m, 约0.6m）,项目中如用不到也可填0
			"AlphaDeg": "0",		// 超声探测角alpha（deg, apa约80, upa约120）,项目中如用不到也可填0
			"BetaDeg": "0"			// 超声宽度角beta （deg, upa约20, apa0）,项目中如用不到也可填0
		},
 ...
```

## 超声波状态

超声波传感器的状态。

`/sonar/status`

| 接口             | Key  | Value                                            |
| ---------------- | ---- | ------------------------------------------------ |
| 探头个数         | num  | int (探头的个数)                                 |
| 雷达的工作状态_1 | 1    | 0x0: Disable 0x1: Enable 0x2: Active 0x3: Failed |
| 雷达的工作状态_2 | 2    | 0x0: Disable 0x1: Enable 0x2: Active 0x3: Failed |
|                  | ...  | ...                                              |

超声波传感器的测量距离：

`/sonar/range`

| 接口          | Key  | Value                                                        |
| ------------- | ---- | ------------------------------------------------------------ |
| 探头个数      | num  | int (探头的个数)                                             |
| 1号探头距离值 | 1    | 0x0: No object、1, 0~10cm、11~20cm、21~30cm、31~40cm、41~50cm、51~60cm |
| 2号探头距离值 | 2    | 0x0: No object、1, 0~10cm、11~20cm、21~30cm、31~40cm、41~50cm、51~60cm |
| ...           | ...  | ...                                                          |

发出前雷达报警音：

`/sonar/beep`

| 接口          | Key  | Value                                                        |
| ------------- | ---- | ------------------------------------------------------------ |
| 探头个数      | num  | int (探头的个数)                                             |
| 1号探头报警音 | 1    | 0x0:Tone zero No warning 、 0x1:Tone one Long beep 、 0x2:Tone two 1.5 Hz 、 0x3:Tone three 3Hz |
| 2号探头报警音 | 2    | 0x0:Tone zero No warning 、 0x1:Tone one Long beep 、 0x2:Tone two 1.5 Hz 、 0x3:Tone three 3Hz |
| ...           | ...  | ...                                                          |

## 控制接口-设置

| Key          | value            | 注释 |      |
| ------------ | ---------------- | ---- | ---- |
| 打开关闭接口 | int (探头的个数) |      |      |



